webpackJsonp([1],{"3oqm":function(t,a){},Ktqm:function(t,a){},L8ks:function(t,a){},NHnr:function(t,a,n){"use strict";function e(t){n("Ktqm")}function s(t){n("L8ks")}function r(t){n("3oqm")}Object.defineProperty(a,"__esModule",{value:!0});var o=n("7+uW"),c=n("mvHQ"),i=n.n(c),d=n("mtWM"),l=n.n(d),u=function(t,a,n){console.log("calling: "+t+" with "+i()(a)),l.a.post("/fn/Card/"+t,i()(a)).then(function(t){console.log("response: "+t.data),n(t.data)}).catch(function(t){console.log("response failed: "+t.responseText)})},p={props:{parent:{type:Object,default:null}},data:function(){return{title:"",content:"",sentResult:"pending"}},methods:{createCard:function(){var t=this;console.log("send");var a=null!==this.parent?this.parent.hash:"";u("cardCreate",{parentHash:a,title:this.title,content:this.content,showNew:!1},function(a){t.sentResult=a,null===t.parent&&u("cardAddAsFavorite",a,function(a){t.$emit("card-created"),t.updateMyCards()})})}}},w=function(){var t=this,a=t.$createElement,n=t._self._c||a;return n("div",{staticClass:"w3-modal"},[n("div",{staticClass:"w3-modal-content"},[n("div",{staticClass:"w3-card-4"},[n("div",{staticClass:"w3-container"},[n("h4",[t._v("Create New Card")]),t._v(" "),null!==t.parent?n("div",{staticClass:"w3-row"},[n("b",[t._v("parent: "+t._s(t.parent.title))])]):t._e(),t._v(" "),n("div",{staticClass:"w3-row"},[n("label",{attrs:{for:""}},[t._v("Title")]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.title,expression:"title"}],staticClass:"w3-input",attrs:{type:"text",name:"",value:""},domProps:{value:t.title},on:{input:function(a){a.target.composing||(t.title=a.target.value)}}})]),t._v(" "),n("div",{staticClass:"w3-row w3-margin-top"},[n("label",{attrs:{for:""}},[t._v("Content")]),t._v(" "),n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.content,expression:"content"}],staticClass:"w3-input w3-border",attrs:{name:"name",rows:"3",cols:"80"},domProps:{value:t.content},on:{input:function(a){a.target.composing||(t.content=a.target.value)}}})]),t._v(" "),n("div",{staticClass:"w3-row w3-margin-top"},[n("button",{staticClass:"w3-button w3-gray",attrs:{type:"button",name:"button"},on:{click:function(a){t.$emit("please-close")}}},[t._v("cancel")]),t._v(" "),n("button",{staticClass:"w3-button w3-blue",attrs:{type:"button",name:"button"},on:{click:function(a){t.createCard()}}},[t._v("save")])]),t._v(" "),n("div",{staticClass:"w3-row w3-margin-top"},[n("div",{staticClass:"w3-panel w3-pale-green"},[n("p",[t._v(t._s(t.sentResult))])])])])])])])},v=[],f={render:w,staticRenderFns:v},C=f,m=n("VU/8"),_=e,h=m(p,C,!1,_,"data-v-24a0a586",null),b=h.exports,g={name:"app-card",components:{"app-new-card-modal":b},props:{card:{type:Object,default:null}},data:function(){return{showNewCard:!1,subCards:[]}},methods:{showNewSubCard:function(){this.showNewCard=!0},updateSubCards:function(){var t=this;u("cardGetLinks",this.card.hash,function(a){a.forEach(function(a){if("CHILD_OF"===a.type){var n=a.card;u("cardRead",n,function(a){console.log("card: "+a),a.hash=n,t.subCards.push(a)})}})})}},created:function(){this.updateSubCards()}},y=function(){var t=this,a=t.$createElement,n=t._self._c||a;return n("div",{},[t.showNewCard?n("app-new-card-modal",{attrs:{parent:t.card},on:{"please-close":function(a){t.showNewCard=!1}}}):t._e(),t._v(" "),n("div",{staticClass:"w3-card-2 w3-padding w3-round"},[n("div",{staticClass:"w3-row"},[n("b",[t._v(t._s(t.card.title))]),t._v(" "),n("p",[t._v(t._s(t.card.content))])]),t._v(" "),t._m(0,!1,!1),t._v(" "),n("div",{staticClass:"w3-row",on:{click:function(a){t.showNewSubCard(t.card)}}},[n("button",{staticClass:"w3-button w3-blue",attrs:{type:"button",name:"button"}},[t._v("New subcard")])]),t._v(" "),t._l(t.subCards,function(t){return n("div",{},[n("app-card",{attrs:{card:t}})],1)})],2)],1)},N=[function(){var t=this,a=t.$createElement,n=t._self._c||a;return n("div",{staticClass:"w3-row"},[n("button",{attrs:{type:"button",name:"button"}},[t._v("showSubcards")])])}],k={render:y,staticRenderFns:N},x=k,M=n("VU/8"),R=s,F=M(g,x,!1,R,null,null),E=F.exports,$={name:"app",components:{"app-new-card-modal":b,"app-card":E},data:function(){return{showNewCard:!1,myCards:[]}},methods:{updateMyCards:function(){var t=this;this.myCards=[],console.log("getting my cards"),u("cardGetMyFavorites",{},function(a){console.log("data: "+a),console.dir(a),console.log(a.length),a.forEach(function(a){u("cardRead",a,function(n){console.log("card: "+n),n.hash=a,t.myCards.push(n)})})})}},created:function(){this.updateMyCards()}},H=function(){var t=this,a=t.$createElement,n=t._self._c||a;return n("div",{attrs:{id:"app"}},[n("h1",{staticClass:"w3-center"},[t._v("Fractal Wiki")]),t._v(" "),n("div",{staticClass:"w3-row"},[n("button",{staticClass:"w3-button w3-blue",attrs:{type:"button",name:"button"},on:{click:function(a){t.showNewCard=!0}}},[t._v("new root card")])]),t._v(" "),t.showNewCard?n("app-new-card-modal",{attrs:{parent:null},on:{"please-close":function(a){t.showNewCard=!1},"card-created":function(a){t.updateMyCards()}}}):t._e(),t._v(" "),n("div",{staticClass:"w3-container"},[n("h4",[t._v("My cards")]),t._v(" "),n("div",{staticClass:"w3-row-padding"},t._l(t.myCards,function(t){return n("div",{},[n("app-card",{attrs:{card:t}})],1)}))])],1)},S=[],q={render:H,staticRenderFns:S},L=q,O=n("VU/8"),j=r,P=O($,L,!1,j,null,null),U=P.exports;new o.a({el:"#app",render:function(t){return t(U)}})}},["NHnr"]);
//# sourceMappingURL=app.bbc8d7861ce65034cc79.js.map